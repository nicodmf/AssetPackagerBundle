<?xml version="1.0" ?>

<container xmlns="http://www.symfony-project.org/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.symfony-project.org/schema/dic/services http://www.symfony-project.org/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="assetpackager.packager.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Packager</parameter>
        <parameter key="assetpackager.packages.javascript" type="collection"></parameter>
        <parameter key="assetpackager.packages.stylesheet" type="collection"></parameter>
        
        <!-- javascript compressors -->
        <parameter key="assetpackager.compressor.javascript.jsmin.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Compressor\Javascript\JSMinCompressor</parameter>
        <parameter key="assetpackager.compressor.javascript.packer.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Compressor\Javascript\PackerCompressor</parameter>
        <parameter key="assetpackager.compressor.javascript.yui.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Compressor\Javascript\YUIJavascriptCompressor</parameter>
        <parameter key="assetpackager.compressor.javascript.closure.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Compressor\Javascript\GoogleClosureCompressor</parameter>
        <parameter key="assetpackager.compressor.javascript.options" type="collection"></parameter>
        <parameter key="assetpackager.compressor.javascript.packages" type="collection"></parameter>
        
        <!-- stylesheet compressors -->
        <parameter key="assetpackager.compressor.stylesheet.cssmin.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Compressor\Stylesheet\CSSMinCompressor</parameter>
        <parameter key="assetpackager.compressor.stylesheet.yui.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Compressor\Stylesheet\YUIStylesheetCompressor</parameter>
        <parameter key="assetpackager.compressor.stylesheet.options" type="collection"></parameter>
        
        <!-- dumpers -->
        <parameter key="assetpackager.dumper.javascript.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Dumper\Javascript\JavascriptDumper</parameter>
        <parameter key="assetpackager.dumper.stylesheet.class">Bundle\Tecbot\AssetPackagerBundle\Packager\Dumper\Stylesheet\StylesheetDumper</parameter>
        
        <!-- options -->
        <parameter key="assetpackager.options.cache_dir">assetpackager/</parameter>
        <parameter key="assetpackager.options.package_assets">true</parameter>
        <parameter key="assetpackager.options.embed_assets">false</parameter>
        <parameter key="assetpackager.options.compress_assets">true</parameter>
        <parameter key="assetpackager.options.gzip_assets">true</parameter>
    </parameters>
    
    <services>
        <service id="assetpackager.packager" class="%assetpackager.packager.class%" shared="true">
            <argument type="service" id="request" />
            <argument>%kernel.cache_dir%/%assetpackager.options.cache_dir%</argument>
            <argument>%assetpackager.packages.javascript%</argument>
            <argument>%assetpackager.packages.stylesheet%</argument>
        </service>
        
        <service id="assetpackager.compressor.javascript.jsmin" class="%assetpackager.compressor.javascript.jsmin.class%" shared="true">
            <argument type="service" id="assetpackager.packager" />
            <argument>%assetpackager.compressor.javascript.options%</argument>
        </service>
        
        <service id="assetpackager.compressor.javascript.packer" class="%assetpackager.compressor.javascript.packer.class%" shared="true">
            <argument type="service" id="assetpackager.packager" />
            <argument>%assetpackager.compressor.javascript.options%</argument>
        </service>
        
        <service id="assetpackager.compressor.javascript.yui" class="%assetpackager.compressor.javascript.yui.class%" shared="true">
            <argument type="service" id="assetpackager.packager" />
            <argument>%assetpackager.compressor.javascript.options%</argument>
        </service>
        
        <service id="assetpackager.compressor.javascript.closure" class="%assetpackager.compressor.javascript.closure.class%" shared="true">
            <argument type="service" id="assetpackager.packager" />
            <argument>%assetpackager.compressor.javascript.options%</argument>
        </service>
        
        <service id="assetpackager.compressor.stylesheet.cssmin" class="%assetpackager.compressor.stylesheet.cssmin.class%" shared="true">
            <argument type="service" id="assetpackager.packager" />
            <argument>%assetpackager.compressor.stylesheet.options%</argument>
        </service>
        
        <service id="assetpackager.compressor.stylesheet.yui" class="%assetpackager.compressor.stylesheet.yui.class%" shared="true">
            <argument type="service" id="assetpackager.packager" />
            <argument>%assetpackager.compressor.stylesheet.options%</argument>
        </service>
        
        <service id="assetpackager.dumper.javascript" class="%assetpackager.dumper.javascript.class%" shared="true">
        </service>
        
        <service id="assetpackager.dumper.stylesheet" class="%assetpackager.dumper.stylesheet.class%" shared="true">
        </service>
    </services>
</container>